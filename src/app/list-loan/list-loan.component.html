<div class="container mt-4">
    <h2 class="text-center mb-4">Lista de Empréstimos</h2>
    <div *ngIf="loans.length > 0; else noLoans">
      <div class="card mb-3" *ngFor="let loan of loans">
        <div class="card-header" (click)="toggleInstallments(loan.id)">
          <h5>
            Empréstimo ID: {{ loan.id }} 
            <span class="badge bg-primary ms-2">{{ loan.currency }}</span>
          </h5>
        </div>
        <div class="card-body">
          <p><strong>Cliente ID:</strong> {{ loan.client_id }}</p>
          <p><strong>Tipo de Empréstimo:</strong> {{ loan.loanType }}</p>
          <p><strong>Data de Início:</strong> {{ loan.date_start }}</p>
          <p><strong>Data de Término:</strong> {{ loan.date_end }}</p>
          <p><strong>Valor Inicial:</strong> {{ loan.amount_pv | currency: loan.currency }}</p>
          <p><strong>Valor Ajustado:</strong> {{ loan.ajustedAmount | currency: loan.currency }}</p>
          <p><strong>Total do Empréstimo:</strong> {{ loan.total_loan | currency: loan.currency }}</p>
          
          <!-- Exibir Parcelas apenas se a variável showInstallments for verdadeira -->
          <div *ngIf="loan.showInstallments">
            <h6 class="mt-4">Parcelas:</h6>
            <div class="table-responsive">
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Juros</th>
                    <th>Amortização</th>
                    <th>Valor da Parcela</th>
                    <th>Saldo Restante</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let installment of loan.installments">
                    <td>{{ installment.installmentNumber }}</td>
                    <td>{{ installment.interest | currency: loan.currency }}</td>
                    <td>{{ installment.amortization | currency: loan.currency }}</td>
                    <td>{{ installment.installmentValue | currency: loan.currency }}</td>
                    <td>{{ installment.remainingBalance | currency: loan.currency }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Template para quando não houver empréstimos -->
    <ng-template #noLoans>
      <p class="text-center text-muted">Nenhum empréstimo encontrado.</p>
    </ng-template>
  </div>
  